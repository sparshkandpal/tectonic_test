<div class="admin-container">
  <div class="admin-header">
    <h1>Edit Ingredient: <%= @dish_ingredient.ingredient.name %></h1>
    <%= link_to 'Back to Dish', edit_dish_path(@dish), class: 'back-link' %>
  </div>

  <%= form_with model: [@dish, @dish_ingredient], local: true, class: 'dish-form' do |form| %>
    <% if @dish_ingredient.errors.any? %>
      <div class="error-messages">
        <h2><%= pluralize(@dish_ingredient.errors.count, "error") %> prohibited this ingredient from being updated:</h2>
        <ul>
          <% @dish_ingredient.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="form-group">
      <%= form.label :ingredient_id, "Ingredient" %>
      <%= form.collection_select :ingredient_id, @ingredients, :id, :name, {}, { class: 'form-control' } %>
    </div>

    <div class="form-group">
      <%= form.label :default_quantity, "Default Quantity" %>
      <%= form.number_field :default_quantity, step: 0.1, class: 'form-control' %>
    </div>

    <div class="form-group">
      <%= form.label :quantity_unit, "Quantity Unit" %>
      <%= form.text_field :quantity_unit, class: 'form-control', placeholder: 'e.g., grams, pieces, cups' %>
      <small class="form-text">Unit of measurement (e.g., grams for chicken, pieces for items)</small>
    </div>

    <div class="form-group">
      <%= form.label :is_customizable, "Is Customizable?" %>
      <%= form.check_box :is_customizable, class: 'form-control' %>
    </div>

    <div class="form-group">
      <%= form.label :extra_cost, "Extra Cost per Unit" %>
      <%= form.number_field :extra_cost, step: 0.01, class: 'form-control' %>
    </div>

    <div class="form-actions">
      <%= form.submit 'Update Ingredient', class: 'btn btn-primary' %>
    </div>
  <% end %>
</div>

<%= render 'dishes/form_styles' %>

<style>
.dish-ingredients-section {
  margin-top: 40px;
  padding-top: 30px;
  border-top: 2px solid #eee;
}

.ingredients-list {
  margin-top: 20px;
}

.ingredient-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px;
  border: 1px solid #ddd;
  border-radius: 8px;
  margin-bottom: 10px;
  background: #f9f9f9;
}

.ingredient-info h4 {
  margin: 0 0 5px 0;
}

.ingredient-info p {
  margin: 5px 0;
  font-size: 14px;
  color: #666;
}

.ingredient-actions {
  display: flex;
  gap: 10px;
}

.btn-small {
  padding: 6px 12px;
  font-size: 14px;
}

.btn-secondary {
  background: #6c757d;
  color: #fff;
}

.btn-secondary:hover {
  background: #5a6268;
}

.btn-danger {
  background: #dc3545;
  color: #fff;
}

.btn-danger:hover {
  background: #c82333;
}
</style>
