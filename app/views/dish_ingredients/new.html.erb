<div class="admin-container">
  <div class="admin-header">
    <h1>Add Ingredient to <%= @dish.name %></h1>
    <%= link_to 'Back to Dish', edit_dish_path(@dish), class: 'back-link' %>
  </div>

  <%= form_with model: [@dish, @dish_ingredient], local: true, class: 'dish-form' do |form| %>
    <% if @dish_ingredient.errors.any? %>
      <div class="error-messages">
        <h2><%= pluralize(@dish_ingredient.errors.count, "error") %> prohibited this ingredient from being added:</h2>
        <ul>
          <% @dish_ingredient.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="form-group">
      <%= form.label :ingredient_id, "Ingredient" %>
      <%= form.collection_select :ingredient_id, @ingredients, :id, :name, { prompt: "Select an ingredient" }, { class: 'form-control' } %>
    </div>

    <div class="form-group">
      <%= form.label :default_quantity, "Default Quantity" %>
      <%= form.number_field :default_quantity, step: 0.1, value: 1.0, class: 'form-control' %>
      <small class="form-text">Default quantity for this ingredient in the dish</small>
    </div>

    <div class="form-group">
      <%= form.label :is_customizable, "Is Customizable?" %>
      <%= form.check_box :is_customizable, class: 'form-control' %>
      <small class="form-text">Allow users to modify this ingredient</small>
    </div>

    <div class="form-group">
      <%= form.label :extra_cost, "Extra Cost per Unit" %>
      <%= form.number_field :extra_cost, step: 0.01, value: 0.0, class: 'form-control' %>
      <small class="form-text">Additional cost when user adds extra of this ingredient</small>
    </div>

    <div class="form-actions">
      <%= form.submit 'Add Ingredient', class: 'btn btn-primary' %>
    </div>
  <% end %>
</div>

<%= render 'dishes/form_styles' %>
